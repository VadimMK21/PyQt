# Сохранение и загрузка конфигурации регистров

## Обзор

Добавлена возможность сохранять и загружать конфигурации регистров в формате INI файлов. Это позволяет:

- Сохранять настройки регистров для чтения
- Сохранять настройки регистров для записи
- Быстро загружать предварительно настроенные конфигурации
- Переносить настройки между разными установками

## Функциональность

### Для регистров чтения (вкладка "Регистры")

1. **Кнопка "Сохранить конфигурацию"** - сохраняет текущую конфигурацию регистров в INI файл
2. **Кнопка "Загрузить конфигурацию"** - загружает конфигурацию из INI файла

### Для регистров записи (окно "Запись в регистры Modbus")

1. **Кнопка "Сохранить конфигурацию"** - сохраняет конфигурацию регистров для записи
2. **Кнопка "Загрузить конфигурацию"** - загружает конфигурацию записи

## Формат INI файлов

### Конфигурация регистров чтения

```ini
[Display]
mode = separate  # или grouped

[General]
register_count = 3

[Register_0]
name = output
slave_id = 10
address = 3335
count = 2
reg_type = Holding
enabled = True
plot_group = Sensors
color = r

[Register_1]
name = pv
slave_id = 10
address = 1284
count = 2
reg_type = Holding
enabled = True
plot_group = Sensors
color = g
```

### Конфигурация регистров записи

```ini
[General]
write_register_count = 3

[WriteRegister_0]
name = setpoint_write
slave_id = 10
address = 1539
reg_type = Holding
value = 25.0

[WriteRegister_1]
name = enable_output
slave_id = 10
address = 2000
reg_type = Coils
value = 1
```

## Параметры конфигурации

### Для регистров чтения:
- `name` - имя регистра
- `slave_id` - ID устройства (1-255)
- `address` - адрес регистра (0-65535)
- `count` - количество регистров (1-4)
- `reg_type` - тип регистра (Holding, Input, Coils, Discrete)
- `enabled` - включен/выключен (True/False)
- `plot_group` - группа для отображения на графике
- `color` - цвет линии на графике

### Для регистров записи:
- `name` - имя регистра
- `slave_id` - ID устройства (1-255)
- `address` - адрес регистра (0-65535)
- `reg_type` - тип регистра (Holding, Coils)
- `value` - значение для записи

## Примеры использования

1. **Создание конфигурации по умолчанию:**
   - Настройте регистры в интерфейсе
   - Нажмите "Сохранить конфигурацию"
   - Выберите имя файла (например, `default_registers.ini`)

2. **Загрузка сохраненной конфигурации:**
   - Нажмите "Загрузить конфигурацию"
   - Выберите INI файл
   - Конфигурация будет загружена и применена

3. **Создание нескольких конфигураций:**
   - Создайте разные конфигурации для разных устройств
   - Сохраните их с описательными именами
   - Загружайте нужную конфигурацию при работе с разными устройствами

## Файлы примеров

В проекте созданы файлы примеров:
- `example_registers_config.ini` - пример конфигурации регистров чтения
- `example_write_config.ini` - пример конфигурации регистров записи

## Обработка ошибок

При сохранении/загрузке конфигурации:
- Показываются информационные сообщения об успешных операциях
- Показываются предупреждения при ошибках
- Программа продолжает работать даже при ошибках загрузки

## Совместимость

- Поддерживается кодировка UTF-8
- Совместимо с Windows, Linux и macOS
- Файлы можно редактировать в любом текстовом редакторе 